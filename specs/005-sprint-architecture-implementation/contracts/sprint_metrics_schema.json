{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Sprint Metrics Schema",
  "type": "object",
  "required": ["sprint_number", "step_id", "tokens", "api_calls", "execution_time_seconds"],
  "properties": {
    "sprint_number": {
      "type": "integer",
      "minimum": 1
    },
    "step_id": {
      "type": "integer",
      "minimum": 1
    },
    "tokens": {
      "type": "object",
      "required": ["input", "output", "total"],
      "properties": {
        "input": {"type": "integer", "minimum": 0},
        "output": {"type": "integer", "minimum": 0},
        "cached": {"type": "integer", "minimum": 0},
        "total": {"type": "integer", "minimum": 0}
      }
    },
    "api_calls": {
      "type": "integer",
      "minimum": 0
    },
    "execution_time_seconds": {
      "type": "number",
      "minimum": 0
    },
    "hitl_interactions": {
      "type": "integer",
      "minimum": 0
    },
    "retry_count": {
      "type": "integer",
      "minimum": 0
    },
    "validation": {
      "type": "object",
      "properties": {
        "passed": {"type": "boolean"},
        "issues": {"type": "array", "items": {"type": "string"}}
      }
    }
  }
}
